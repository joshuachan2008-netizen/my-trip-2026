<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å—ç¾å¤§å†’éšª 2026</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #d97b56;
            --secondary-color: #2c3e50;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333;
            --light-text: #888;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
            color: var(--text-color);
            padding-bottom: 90px;
        }

        /* Banner & Tabs (Fixed Top) */
        .top-container {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: var(--bg-color);
        }

        .banner {
            height: 180px; /* ç¨å¾®ç¸®å°ä¸€é»ä»¥ç•™ç©ºé–“çµ¦å…§å®¹ */
            background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1587595431973-160d0d94add1?q=80&w=2076');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        .banner h1 { margin: 0; font-size: 24px; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .trip-stats { font-size: 13px; opacity: 0.9; margin-top: 5px; display: flex; gap: 10px;}

        .date-tabs {
            display: flex;
            overflow-x: auto;
            padding: 10px 16px;
            gap: 8px;
            background: var(--bg-color);
            scrollbar-width: none;
            box-shadow: 0 4px 10px -5px rgba(0,0,0,0.1);
        }
        .date-tabs::-webkit-scrollbar { display: none; }
        .date-tab {
            background: white;
            border-radius: 12px;
            padding: 8px 16px;
            text-align: center;
            min-width: 50px;
            flex-shrink: 0;
            font-size: 14px;
            color: #666;
            border: 1px solid transparent;
            cursor: pointer;
        }
        .date-tab.active {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(217, 123, 86, 0.3);
        }
        .date-tab .day { font-size: 11px; margin-bottom: 2px; opacity: 0.8; }

        /* Timeline Styles */
        .day-anchor {
            scroll-margin-top: 240px; /* é—œéµï¼šé€™æ˜¯ä¿®æ­£è·³è½‰ä¸æº–ç¢ºçš„è¨­å®š */
        }
        .day-header {
            margin: 24px 20px 10px;
            font-weight: 800;
            font-size: 18px;
            color: var(--secondary-color);
            display: flex;
            align-items: center;
        }
        .day-header::before {
            content: ''; width: 4px; height: 18px; background: var(--primary-color);
            margin-right: 10px; border-radius: 2px;
        }

        .timeline-item { display: flex; margin: 0 16px 16px; }
        .timeline-time { min-width: 45px; font-weight: 600; font-size: 13px; color: #999; padding-top: 14px; text-align: right; margin-right: 12px; }
        .activity-card {
            background: white; border-radius: 16px; padding: 16px; flex-grow: 1;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03); position: relative;
            border-left: 4px solid #eee;
        }
        .type-flight { border-left-color: #2196f3; }
        .type-stay { border-left-color: #9c27b0; }
        .type-activity { border-left-color: #4caf50; }
        
        .activity-title { font-weight: 700; font-size: 16px; margin-bottom: 4px; }
        .activity-desc { font-size: 13px; color: #666; }
        .activity-cost {
            position: absolute; top: 12px; right: 12px;
            font-size: 12px; font-weight: bold; color: var(--primary-color);
            background: #fff5eb; padding: 2px 6px; border-radius: 4px;
        }

        /* Currency Page Styles */
        .calc-container { padding: 20px; }
        .calc-card {
            background: white; border-radius: 20px; padding: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); text-align: center;
        }
        .calc-title { font-size: 18px; font-weight: bold; color: var(--secondary-color); margin-bottom: 20px; }
        .input-group { margin-bottom: 20px; text-align: left; }
        .input-label { font-size: 12px; color: #888; margin-bottom: 5px; display: block; }
        
        .currency-input {
            width: 100%; box-sizing: border-box; padding: 12px; font-size: 24px;
            border: 2px solid #eee; border-radius: 12px; outline: none; font-weight: bold;
        }
        .currency-input:focus { border-color: var(--primary-color); }
        
        .currency-select {
            width: 100%; padding: 12px; font-size: 16px; margin-top: 10px;
            border-radius: 12px; border: 1px solid #ddd; background: #f9f9f9;
        }

        .result-box {
            background: #f0fdf4; border-radius: 16px; padding: 20px; margin-top: 20px;
        }
        .result-label { font-size: 13px; color: #166534; }
        .result-amount { font-size: 32px; font-weight: 800; color: #166534; margin: 5px 0; }
        .exchange-rate-display { font-size: 12px; color: #888; margin-top: 10px; }

        /* Navigation */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%; background: rgba(255,255,255,0.98);
            border-top: 1px solid #eee; display: flex; justify-content: space-around;
            padding: 10px 0 25px; z-index: 2000;
        }
        .nav-item { text-align: center; color: #bbb; font-size: 10px; cursor: pointer; }
        .nav-item.active { color: var(--primary-color); }
        .nav-item i { display: block; font-size: 22px; margin-bottom: 4px; }

        .fab {
            position: fixed; bottom: 90px; right: 20px;
            background: var(--primary-color); color: white;
            width: 56px; height: 56px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px; box-shadow: 0 4px 12px rgba(217, 123, 86, 0.4);
            z-index: 1500; cursor: pointer; transition: transform 0.1s;
        }
        .fab:active { transform: scale(0.9); }

        .page { display: none; padding-bottom: 20px; }
        .page.active { display: block; }
    </style>
</head>
<body>

    <div id="itinerary-page" class="page active">
        <div class="top-container">
            <div class="banner">
                <h1>South America 2026</h1>
                <div class="trip-stats">
                    <span><i class="fas fa-calendar"></i> 88 Days</span>
                    <span><i class="fas fa-user-friends"></i> 4 Pax</span>
                </div>
            </div>
            <div class="date-tabs" id="dateTabs"></div>
        </div>

        <div id="itinerary-content">
            </div>
    </div>

    <div id="currency-page" class="page">
        <div style="padding: 20px; background: white; border-bottom: 1px solid #eee;">
            <h2 style="margin:0; color:var(--secondary-color);">åŒ¯ç‡æ›ç®—</h2>
        </div>
        
        <div class="calc-container">
            <div class="calc-card">
                <div class="input-group">
                    <label class="input-label">è¼¸å…¥ç•¶åœ°é‡‘é¡</label>
                    <input type="number" id="calcInput" class="currency-input" placeholder="0" oninput="calculate()">
                    
                    <select id="currencySelect" class="currency-select" onchange="calculate()">
                        <option value="0.38">ğŸ‡²ğŸ‡½ å¢¨è¥¿å“¥æŠ«ç´¢ (MXN)</option>
                        <option value="1.35">ğŸ‡§ğŸ‡· å·´è¥¿é›·äºçˆ¾ (BRL)</option>
                        <option value="7.80">ğŸ‡ºğŸ‡¸ ç¾é‡‘ (USD)</option>
                        <option value="0.008">ğŸ‡¨ğŸ‡± æ™ºåˆ©æ¯”ç´¢ (CLP)</option>
                    </select>
                </div>

                <div class="result-box">
                    <div class="result-label">ç­‰æ–¼æ¸¯å¹£</div>
                    <div class="result-amount">HK$ <span id="calcResult">0.00</span></div>
                </div>

                <div class="exchange-rate-display">
                    åƒè€ƒåŒ¯ç‡: 1 <span id="curName">MXN</span> â‰ˆ HK$ <span id="curRate">0.38</span>
                </div>
            </div>

            <div style="margin-top: 20px; color: #888; font-size: 12px; text-align: center;">
                * åŒ¯ç‡åƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›æ‰£æ¬¾è¦–ä¹éŠ€è¡Œ
            </div>
        </div>
    </div>

    <div id="bookings-page" class="page">
        <div style="padding: 20px;"><h2 style="color:#333">æˆ‘çš„é è¨‚</h2><p>é€™è£¡æ˜¯é è¨‚åˆ—è¡¨...</p></div>
    </div>

    <div class="fab" onclick="addNewItem()"><i class="fas fa-plus"></i></div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchPage('itinerary')">
            <i class="fas fa-map-marked-alt"></i>è¡Œç¨‹
        </div>
        <div class="nav-item" onclick="switchPage('bookings')">
            <i class="fas fa-ticket-alt"></i>é è¨‚
        </div>
        <div class="nav-item" onclick="switchPage('currency')">
            <i class="fas fa-calculator"></i>åŒ¯ç‡
        </div>
    </div>

<script>
    // ============================================
    // 1. æ›´æ–°å¾Œçš„è©³ç´°è³‡æ–™åº« (1æœˆ28æ—¥ - 4æœˆ2æ—¥)
    // ============================================
    
    let itineraryData = [
        // --- å¢¨è¥¿å“¥ Baja California Sur ---
        { date: "2026-01-28", time: "14:00", title: "æŠµé” Loreto (LTO)", type: "transport", cost: "$540", desc: "å–è»Š (Alamo)ï¼Œè‡ªé§•å‰å¾€ç°é¯¨æ‘ (Adolfo LÃ³pez Mateos)" },
        { date: "2026-01-28", time: "18:00", title: "å…¥ä½ Lighthouse Guest House", type: "stay", cost: "", desc: "ç°é¯¨æ‘ (ä½ 2 æ™š) *æœª book" },
        { date: "2026-01-29", time: "08:00", title: "ã€ç§äººåŒ…èˆ¹ã€‘è¿‘è·é›¢æ¥è§¸ç°é¯¨", type: "activity", cost: "$4400", desc: "4 ä½ max (å·² book)" },
        { date: "2026-01-30", time: "08:00", title: "ç¬¬äºŒæ¬¡è§€é¯¨æ©Ÿæœƒ / ä¼‘æ¯", type: "activity", cost: "", desc: "æ—©ä¸Šè‡ªç”±æ´»å‹•" },
        { date: "2026-01-30", time: "13:00", title: "é§•è»Šå‰å¾€ La Paz", type: "transport", cost: "", desc: "ä¸‹åˆå‡ºç™¼" },
        { date: "2026-01-30", time: "18:00", title: "å…¥ä½ Courtyard by Marriott", type: "stay", cost: "", desc: "La Paz (ä½ 2 æ™š) *æœª book" },
        { date: "2026-01-31", time: "07:00", title: "èˆ‡é¯¨é¯Šå…±æ¸¸ (Whale Shark)", type: "activity", cost: "$3200", desc: "4 ä½ max *æœª book" },
        { date: "2026-01-31", time: "13:30", title: "é‚„è»Š & ä¼‘æ¯", type: "transport", cost: "", desc: "La Paz å¸‚å…§ä¼‘æ¯" },

        // --- å¢¨è¥¿å“¥åŸ (Mexico City) ---
        { date: "2026-02-01", time: "08:25", title: "é£›å¾€ å¢¨è¥¿å“¥åŸ (MEX)", type: "flight", cost: "$1388", desc: "AM 363 (08:25-11:45)" },
        { date: "2026-02-01", time: "14:00", title: "å…¥ä½ Hotel Geneve", type: "stay", cost: "", desc: "Roma å€ (ä½ 5 æ™š)" },
        { date: "2026-02-01", time: "15:00", title: "æ¼«æ­¥ Roma å€", type: "activity", cost: "", desc: "å¸‚å€è§€å…‰" },
        { date: "2026-02-02", time: "10:00", title: "äººé¡å­¸åšç‰©é¤¨ & ç©ºä¸­é£›äºº", type: "activity", cost: "", desc: "Voladores de Papantla" },
        { date: "2026-02-03", time: "10:00", title: "Xochimilco é‹æ²³ & é¬¼å¨ƒå³¶", type: "activity", cost: "", desc: "éŠèˆ¹é«”é©—" },
        { date: "2026-02-03", time: "19:00", title: "Lucha Libre (æ‘”è§’)", type: "activity", cost: "", desc: "æ™šä¸Šè§€çœ‹" },
        { date: "2026-02-04", time: "09:00", title: "ç‰¹å¥§è’‚ç“¦å (Teotihuacan)", type: "activity", cost: "", desc: "å¤ªé™½/æœˆäº®é‡‘å­—å¡”" },
        { date: "2026-02-04", time: "14:00", title: "å·¥è—å“å¸‚é›†", type: "activity", cost: "", desc: "La Ciudadela" },
        { date: "2026-02-04", time: "19:00", title: "èŠ­è•¾èˆè¡¨æ¼”", type: "activity", cost: "", desc: "Bellas Artes" },
        { date: "2026-02-05", time: "10:00", title: "Mercado de Jamaica (èŠ±å¸‚)", type: "activity", cost: "", desc: "& 2è™Ÿç·šçºœè»Šé«”é©—" },

        // --- è´è¶è°· & å‘¨é‚Š ---
        { date: "2026-02-06", time: "10:00", title: "å†æ¬¡ç§Ÿè»Šå‰å¾€ Angangueo", type: "transport", cost: "", desc: "å‰å¾€è´è¶è°·" },
        { date: "2026-02-06", time: "16:00", title: "å…¥ä½ Hotel Albergue Don Bruno", type: "stay", cost: "", desc: "*è¦ send email (ä½ 2 æ™š)" },
        { date: "2026-02-07", time: "09:00", title: "ã€ä¸–ç•Œå¥‡è§€ã€‘å¸ç‹è¶ä¿è­·å€", type: "activity", cost: "", desc: "El Rosario (é¨é¦¬ä¸Šå±±)" },
        { date: "2026-02-08", time: "09:00", title: "Sierra Chincua è´è¶å€", type: "activity", cost: "", desc: "å‰å¾€ Jungapeo æµ¸æº«æ³‰" },
        { date: "2026-02-08", time: "18:00", title: "å…¥ä½ El Santuario Resort", type: "stay", cost: "$13xx", desc: "Valle de Bravo (ä½ 2 æ™š)" },
        { date: "2026-02-09", time: "10:00", title: "Valle de Bravo ç™½è‰²å°é®", type: "activity", cost: "", desc: "æ¹–æ³ŠéŠç©" },

        // --- Puebla & å‘¨é‚Š ---
        { date: "2026-02-10", time: "09:00", title: "å‰å¾€ Toluca & Metepec", type: "transport", cost: "", desc: "å½©ç¹ªç»ç’ƒæ¤ç‰©åœ’ & é¦¬è³½å…‹æ¨“æ¢¯" },
        { date: "2026-02-10", time: "18:00", title: "å…¥ä½ Puebla é…’åº—", type: "stay", cost: "", desc: "InterContinental æˆ– Quinta Real?" },
        { date: "2026-02-11", time: "10:00", title: "Puebla å¸‚ä¸­å¿ƒæ·±åº¦éŠ", type: "activity", cost: "", desc: "åœ–æ›¸é¤¨ã€ç“·å™¨è¡—" },
        { date: "2026-02-12", time: "10:00", title: "Cholula å¤§æ•™å ‚ & ç©ºä¸­é£›äºº", type: "activity", cost: "", desc: "é‡‘å­—å¡”éºè·¡" },
        { date: "2026-02-13", time: "10:00", title: "Atlixco é®®èŠ±å°é®", type: "activity", cost: "", desc: "æˆ–åœ¨ Puebla ä¼‘æ¯ (å¯é‚„è»Š)" },
        { date: "2026-02-14", time: "10:00", title: "Huejotzingo ç«æ§ç¯€å˜‰å¹´è¯", type: "activity", cost: "", desc: "å˜‰å¹´è¯é–‹å¹•" },

        // --- å·´è¥¿ (Pantanal/Bonito) ---
        { date: "2026-02-15", time: "08:00", title: "é§•è»Šå› MEX æ©Ÿå ´é‚„è»Š", type: "transport", cost: "", desc: "ã€é—œéµè½‰æŠ˜æ—¥ã€‘" },
        { date: "2026-02-15", time: "12:35", title: "é£›å¾€ è–ä¿ç¾… (GRU)", type: "flight", cost: "", desc: "AA264 + AA929 (MIA è½‰æ©Ÿ)" },
        { date: "2026-02-16", time: "06:20", title: "æŠµé” GRU è½‰æ©Ÿ", type: "transport", cost: "", desc: "ç­‰å¾…è½‰æ©Ÿå» Bonito" },
        { date: "2026-02-16", time: "11:35", title: "é£›å¾€ Bonito (CGR)", type: "flight", cost: "$536", desc: "LA3886 (å†åŒ…è»Š4å°æ™‚)" },
        { date: "2026-02-17", time: "09:00", title: "Rio Sucuri æ¼‚æµæµ®æ½›", type: "activity", cost: "", desc: "å°‹æ‰¾æ£®èšº/å½©é­š" },
        { date: "2026-02-17", time: "18:00", title: "å…¥ä½ Casa Guariroba", type: "stay", cost: "", desc: "Bonito æ°‘å®¿" },
        { date: "2026-02-18", time: "09:00", title: "Rio da Prata / Boca da OnÃ§a", type: "activity", cost: "", desc: "éŠ€æ²³æ¼‚æµ æˆ– ç€‘å¸ƒå¥è¡Œ (2æ€1)" },

        // --- å·´è¥¿ (Rio de Janeiro) ---
        { date: "2026-02-19", time: "14:50", title: "é£›å¾€ é‡Œç´„ç†±å…§ç›§ (GIG)", type: "flight", cost: "$1065", desc: "AD4247+AD4040 (VCP è½‰æ©Ÿ)" },
        { date: "2026-02-19", time: "20:30", title: "æŠµé”é‡Œç´„", type: "stay", cost: "", desc: "å…¥ä½ BNB (ä½ 4 æ™š)" },
        { date: "2026-02-20", time: "09:00", title: "åŸºç£åƒ & ç³–éºµåŒ…å±±", type: "activity", cost: "", desc: "é‡Œç´„åœ°æ¨™ä¸€æ—¥éŠ" },
        { date: "2026-02-21", time: "10:00", title: "ç™¾å¹´å’–å•¡å»³ & é»ƒè‰²å°ç«è»Š", type: "activity", cost: "", desc: "Confeitaria Colombo" },
        { date: "2026-02-21", time: "20:00", title: "å˜‰å¹´è¯å† è»éŠè¡Œ", type: "activity", cost: "", desc: "Champions Parade (Sector 4)" },
        { date: "2026-02-22", time: "10:00", title: "æµ·ç˜æ¼«æ­¥", type: "activity", cost: "", desc: "è‡ªç„¶é†’ / Copacabana" },

        // --- äºé¦¬éœ (Amazon) ---
        { date: "2026-02-23", time: "09:40", title: "é£›å¾€ ç‘ªç‘™æ–¯ (MAO)", type: "flight", cost: "$1851", desc: "AD4028+AD4056" },
        { date: "2026-02-24", time: "08:00", title: "é€²å…¥äºé¦¬éœ Lodge (Day 1)", type: "activity", cost: "", desc: "é›¨æ—æ¢éšªé–‹å§‹" },
        { date: "2026-02-25", time: "08:00", title: "äºé¦¬éœæ¢éšª (Day 2)", type: "activity", cost: "", desc: "é‡£é£Ÿäººé­šã€è±¡é­šã€å¤œé–“è§€å¯Ÿ" },
        { date: "2026-02-26", time: "08:00", title: "äºé¦¬éœæ¢éšª (Day 3)", type: "activity", cost: "", desc: "ç²‰ç´…æ²³è±šã€å¢æ—å¾’æ­¥" },
        { date: "2026-02-27", time: "08:00", title: "äºé¦¬éœæ¢éšª (Day 4)", type: "activity", cost: "", desc: "æ—¥å‡ºã€åŸä½æ°‘æ¢è¨ª" },
        { date: "2026-02-28", time: "12:00", title: "è¿”å›ç‘ªç‘™æ–¯å¸‚å…§", type: "transport", cost: "", desc: "å¸‚å…§ä¼‘æ¯ï¼Œç­‰å‡Œæ™¨æ©Ÿ" },

        // --- å“¥æ–¯é”é»åŠ  (Costa Rica) ---
        { date: "2026-03-01", time: "03:35", title: "é£›å¾€ è–è·è¥¿ (SJO)", type: "flight", cost: "$1602", desc: "CM140 (PTY è½‰æ©Ÿ)" },
        { date: "2026-03-01", time: "10:00", title: "å‰å¾€ Arenal ç«å±±", type: "transport", cost: "", desc: "La Fortuna æº«æ³‰" },
        { date: "2026-03-02", time: "09:00", title: "Rio Celeste è—æ²³å¥è¡Œ", type: "activity", cost: "", desc: "*è¨˜å¾—ç§Ÿé›¨é´ & çœ‹æ¨¹æ‡¶" },
        { date: "2026-03-03", time: "09:00", title: "å‰å¾€ San Gerardo de Dota", type: "transport", cost: "", desc: "é›²éœ§æ—" },
        { date: "2026-03-04", time: "08:00", title: "å°‹æ‰¾é³³å°¾ç¶ å’¬éµ‘", type: "activity", cost: "", desc: "é¤µèœ‚é³¥" },
        { date: "2026-03-05", time: "08:00", title: "å°‹æ‰¾é³³å°¾ç¶ å’¬éµ‘ (Day 2)", type: "activity", cost: "", desc: "ç”Ÿæ…‹æ”å½±" },
        { date: "2026-03-06", time: "16:45", title: "é£›å¾€ åŸºå¤š (UIO)", type: "flight", cost: "$964", desc: "AV647" },

        // --- åŠ æ‹‰å¸•æˆˆæ–¯ (Galapagos) ---
        { date: "2026-03-07", time: "10:00", title: "åŸºå¤š (Quito) ä¼‘æ•´", type: "activity", cost: "", desc: "é©æ‡‰é«˜åº¦" },
        { date: "2026-03-08", time: "11:10", title: "é£›å¾€ åŠ æ‹‰å¸•æˆˆæ–¯ (GPS)", type: "flight", cost: "$987", desc: "AV1688" },
        { date: "2026-03-09", time: "10:00", title: "Legend éƒµè¼ª (ä¸Šèˆ¹)", type: "activity", cost: "", desc: "7æ™š éƒµè¼ªä¹‹æ—…" },
        { date: "2026-03-16", time: "08:00", title: "Legend éƒµè¼ª (ä¸‹èˆ¹)", type: "activity", cost: "", desc: "ä¸»å³¶ä¼‘æ¯" },
        { date: "2026-03-18", time: "11:40", title: "é£›å¾€ ç“œäºåŸºçˆ¾ (GYE)", type: "flight", cost: "$1136", desc: "AV1633" },

        // --- å¾©æ´»ç¯€å³¶ (Easter Island) ---
        { date: "2026-03-19", time: "09:05", title: "é£›å¾€ è–åœ°ç‰™å“¥ (SCL)", type: "flight", cost: "$2050", desc: "LA1430+LA651 (LIM è½‰æ©Ÿ)" },
        { date: "2026-03-20", time: "08:35", title: "é£›å¾€ å¾©æ´»ç¯€å³¶ (IPC)", type: "flight", cost: "$1695", desc: "LA841" },
        { date: "2026-03-21", time: "09:00", title: "å¾©æ´»ç¯€å³¶æ·±åº¦éŠ (Day 1)", type: "activity", cost: "", desc: "æ—¥å‡º Tongariki" },
        { date: "2026-03-22", time: "09:00", title: "å¾©æ´»ç¯€å³¶æ·±åº¦éŠ (Day 2)", type: "activity", cost: "", desc: "Rano Raraku æ¡çŸ³å ´" },
        { date: "2026-03-23", time: "09:00", title: "å¾©æ´»ç¯€å³¶æ·±åº¦éŠ (Day 3)", type: "activity", cost: "", desc: "Ana Kakenga æ´ç©´" },
        { date: "2026-03-24", time: "14:30", title: "é£›å› è–åœ°ç‰™å“¥ (SCL)", type: "flight", cost: "$1695", desc: "LA842" },
        { date: "2026-03-25", time: "10:00", title: "è–åœ°ç‰™å“¥ æœ€å¾Œæ¡è³¼", type: "activity", cost: "", desc: "å¸‚å…§ä¼‘æ¯" },

        // --- ä¼Šç“œè˜‡ (Iguazu) & å›ç¨‹ ---
        { date: "2026-03-26", time: "06:50", title: "é£›å¾€ ä¼Šç“œè˜‡ (IGU)", type: "flight", cost: "$874", desc: "ã€é—œéµç›´èˆªã€‘JetSmart JA780" },
        { date: "2026-03-27", time: "09:00", title: "å·´è¥¿å´ä¼Šç“œè˜‡ & é³¥åœ’", type: "activity", cost: "", desc: "Iguazu Falls" },
        { date: "2026-03-28", time: "09:00", title: "éå¢ƒå·´æ‹‰åœ­ (æ‰“å¡)", type: "activity", cost: "", desc: "ä¸‹åˆå‰å¾€é˜¿æ ¹å»·å´" },
        { date: "2026-03-29", time: "09:00", title: "é˜¿æ ¹å»·å´ä¼Šç“œè˜‡", type: "activity", cost: "", desc: "é­”é¬¼å’½å–‰æ­¥é“" },
        { date: "2026-03-30", time: "09:00", title: "ç€‘å¸ƒå€åŠ å¤šä¸€æ—¥", type: "activity", cost: "", desc: "å¯é¸" },
        { date: "2026-03-31", time: "20:50", title: "é£›å¾€ è–ä¿ç¾… (GRU)", type: "flight", cost: "$786", desc: "G3 1181" },
        { date: "2026-04-01", time: "10:00", title: "è–ä¿ç¾… ä¼‘æ¯", type: "activity", cost: "", desc: "æº–å‚™å›ç¨‹" },
        { date: "2026-04-02", time: "21:00", title: "é£›å¾€ è’™ç‰¹åˆ©çˆ¾ (YUL)", type: "flight", cost: "", desc: "çµæŸ 88 å¤©è¡Œç¨‹" }
    ];

    let bookingsData = [
        { type: "flight", airline: "Aeromexico", code: "AM 363", from: "LTO", to: "MEX", date: "01 Feb", time: "08:25 - 11:45" },
        { type: "flight", airline: "American", code: "AA 264", from: "MEX", to: "GRU", date: "15 Feb", time: "12:35 - 16:50" },
        { type: "flight", airline: "LATAM", code: "LA 3886", from: "GRU", to: "CGR", date: "16 Feb", time: "11:35 - 12:20" },
        { type: "flight", airline: "Azul", code: "AD 4247", from: "CGR", to: "GIG", date: "19 Feb", time: "14:50 - 20:30" },
        { type: "flight", airline: "Azul", code: "AD 4028", from: "GIG", to: "MAO", date: "23 Feb", time: "09:40 - 15:35" },
        { type: "flight", airline: "Copa", code: "CM 140", from: "MAO", to: "SJO", date: "01 Mar", time: "03:35 - 08:21" },
        { type: "flight", airline: "Avianca", code: "AV 647", from: "SJO", to: "UIO", date: "06 Mar", time: "16:45 - 20:05" },
        { type: "flight", airline: "Avianca", code: "AV 1688", from: "UIO", to: "GPS", date: "08 Mar", time: "11:10 - 12:20" },
        { type: "flight", airline: "LATAM", code: "LA 1430", from: "GYE", to: "SCL", date: "19 Mar", time: "09:05 - 17:55" },
        { type: "flight", airline: "LATAM", code: "LA 841", from: "SCL", to: "IPC", date: "20 Mar", time: "08:35 - 12:00" },
        { type: "flight", airline: "JetSmart", code: "JA 780", from: "SCL", to: "IGU", date: "26 Mar", time: "06:50 - 09:45" },
        { type: "hotel", name: "Hotel Geneve", loc: "Mexico City", date: "01-06 Feb", desc: "5 Nights" },
        { type: "hotel", name: "El Santuario", loc: "Valle de Bravo", date: "08-10 Feb", desc: "Luxury Resort" }
    ];

    // ============================================
    // 2. åˆå§‹åŒ– App
    // ============================================

    function init() {
        generateDateTabs();
        renderItinerary();
        renderBookings(); // æ–°å¢é€™ä¸€è¡Œä¾†é¡¯ç¤ºé è¨‚
    }

    // ç”Ÿæˆæ—¥æœŸæŒ‰éˆ• (èª¿æ•´æ—¥æœŸç¯„åœè‡³ 4æœˆ2æ—¥)
    function generateDateTabs() {
        const container = document.getElementById('dateTabs');
        container.innerHTML = '';
        const startDate = new Date('2026-01-28');
        const endDate = new Date('2026-04-02'); // æ›´æ–°çµæŸæ—¥æœŸ
        let curr = startDate;

        while (curr <= endDate) {
            const dateStr = curr.toISOString().split('T')[0];
            const displayDate = `${curr.getDate()}/${curr.getMonth()+1}`;
            const tab = document.createElement('div');
            tab.className = 'date-tab';
            tab.innerText = displayDate;
            tab.onclick = () => scrollToDate(dateStr, tab);
            container.appendChild(tab);
            curr.setDate(curr.getDate() + 1);
        }
        
        // é è¨­é¸ä¸­ç¬¬ä¸€å¤©
        if(container.firstChild) container.firstChild.classList.add('active');
    }

    // æ¸²æŸ“è¡Œç¨‹ (æ”¯æ´æ–°å¢å…§å®¹)
    function renderItinerary() {
        const container = document.getElementById('itinerary-content');
        container.innerHTML = '';
        
        // æŒ‰æ—¥æœŸæ’åº
        itineraryData.sort((a,b) => new Date(a.date + 'T' + a.time) - new Date(b.date + 'T' + b.time));
        
        let lastDate = '';

        itineraryData.forEach(item => {
            if (item.date !== lastDate) {
                const header = document.createElement('div');
                header.className = 'day-header day-anchor'; 
                header.id = `date-${item.date}`;
                
                // é¡¯ç¤ºæ˜ŸæœŸå¹¾
                const d = new Date(item.date);
                const weekDay = d.toLocaleDateString('zh-HK', {weekday: 'short'});
                
                header.innerText = `${item.date} (${weekDay})`;
                container.appendChild(header);
                lastDate = item.date;
            }

            let borderClass = 'type-activity';
            if (item.type === 'flight') borderClass = 'type-flight';
            if (item.type === 'stay') borderClass = 'type-stay';
            if (item.type === 'transport') borderClass = 'type-flight'; // äº¤é€šç”¨è—è‰²

            const card = document.createElement('div');
            card.className = 'timeline-item';
            card.innerHTML = `
                <div class="timeline-time">${item.time}</div>
                <div class="activity-card ${borderClass}">
                    ${item.cost ? `<div class="activity-cost">${item.cost}</div>` : ''}
                    <div class="activity-title">${item.title}</div>
                    <div class="activity-desc">${item.desc}</div>
                </div>
            `;
            container.appendChild(card);
        });
    }
    
    // æ¸²æŸ“é è¨‚ (Flights & Hotels)
    function renderBookings() {
        const container = document.getElementById('bookings-page');
        // æ¸…ç©ºé™¤äº†æ¨™é¡Œä»¥å¤–çš„å…§å®¹ (éœ€ä¿ç•™ html çµæ§‹ä¸­çš„ header)
        // é€™è£¡æˆ‘å€‘ç›´æ¥ç”¨ JS é‡å»ºå…§å®¹æ¯”è¼ƒç°¡å–®
        let html = `
            <div style="padding: 20px 20px 10px;">
                <h2 style="margin:0; color:var(--secondary-color);">æˆ‘çš„é è¨‚</h2>
            </div>
            <div style="display:flex; gap:10px; padding:0 20px 10px;">
                <span style="background:var(--secondary-color); color:white; padding:6px 12px; border-radius:15px; font-size:13px;">å…¨éƒ¨</span>
            </div>
            <div id="bookings-list" style="padding-bottom:80px;">
        `;

        bookingsData.forEach(item => {
            if (item.type === 'flight') {
                html += `
                <div style="background:white; margin:15px 20px; border-radius:16px; padding:15px; box-shadow:0 2px 8px rgba(0,0,0,0.05); display:flex;">
                    <div style="flex-grow:1;">
                        <div style="color:var(--secondary-color); font-weight:bold; margin-bottom:5px;">
                            <i class="fas fa-plane"></i> ${item.airline} <span style="float:right;">${item.code}</span>
                        </div>
                        <div style="display:flex; justify-content:space-between; align-items:center; font-size:20px; font-weight:800; color:#333;">
                            <span>${item.from}</span>
                            <span style="font-size:12px; color:#ccc;">-------</span>
                            <span>${item.to}</span>
                        </div>
                        <div style="font-size:12px; color:#888; margin-top:5px;">
                            ${item.date} â€¢ ${item.time}
                        </div>
                    </div>
                </div>`;
            } else {
                html += `
                <div style="background:white; margin:15px 20px; border-radius:16px; padding:15px; box-shadow:0 2px 8px rgba(0,0,0,0.05);">
                    <div style="color:#9c27b0; font-weight:bold; margin-bottom:5px;">
                        <i class="fas fa-hotel"></i> ${item.name}
                    </div>
                    <div style="font-size:14px;">ğŸ“ ${item.loc}</div>
                    <div style="font-size:12px; color:#888; margin-top:5px;">${item.date} â€¢ ${item.desc}</div>
                </div>`;
            }
        });
        
        html += `</div>`;
        container.innerHTML = html;
    }

    // ä¿®æ­£æ—¥æœŸè·³è½‰ (ç²¾æº–å®šä½)
    function scrollToDate(dateStr, tabElement) {
        document.querySelectorAll('.date-tab').forEach(t => t.classList.remove('active'));
        if(tabElement) tabElement.classList.add('active');

        const element = document.getElementById(`date-${dateStr}`);
        if (element) {
            const headerOffset = 250; 
            const elementPosition = element.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
            window.scrollTo({ top: offsetPosition, behavior: "smooth" });
        } else {
            alert("ç•¶å¤©æ²’æœ‰è¡Œç¨‹ï¼");
        }
    }

    // æ–°å¢è¡Œç¨‹ (+ è™ŸåŠŸèƒ½)
    function addNewItem() {
        const title = prompt("è«‹è¼¸å…¥æ´»å‹•åç¨±:", "åƒå¤§é¤");
        if (!title) return;
        
        const date = prompt("æ—¥æœŸ (YYYY-MM-DD):", "2026-02-01");
        const time = prompt("æ™‚é–“ (HH:MM):", "19:00");
        const cost = prompt("è²»ç”¨ (é¸å¡«):", "");

        itineraryData.push({
            date: date,
            time: time,
            title: title,
            type: "activity",
            cost: cost ? `$${cost}` : "",
            desc: "æ–°å¢çš„é …ç›®"
        });

        renderItinerary();
        setTimeout(() => scrollToDate(date), 100);
    }

    // åŒ¯ç‡è¨ˆç®—æ©Ÿé‚è¼¯
    function calculate() {
        const amount = parseFloat(document.getElementById('calcInput').value) || 0;
        const rate = parseFloat(document.getElementById('currencySelect').value);
        const result = amount * rate;
        
        document.getElementById('calcResult').innerText = result.toFixed(2);
        
        const select = document.getElementById('currencySelect');
        const curText = select.options[select.selectedIndex].text.split(' ')[1];
        document.getElementById('curName').innerText = curText;
        document.getElementById('curRate').innerText = rate;
    }

    // é é¢åˆ‡æ›
    function switchPage(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(pageId + '-page').classList.add('active');
        
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        
        const icons = document.querySelectorAll('.nav-item');
        if(pageId === 'itinerary') icons[0].classList.add('active');
        if(pageId === 'bookings') icons[1].classList.add('active');
        if(pageId === 'currency') icons[2].classList.add('active');
    }

    // å•Ÿå‹• App
    init();

</script>
</body>
</html>
